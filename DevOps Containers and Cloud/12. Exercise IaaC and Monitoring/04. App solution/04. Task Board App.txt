Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.

Try the new cross-platform PowerShell https://aka.ms/pscore6

PS C:\Users\NB> cd '.\Exercise IaaC and Monitoring\'
PS C:\Users\NB\Exercise IaaC and Monitoring> git clone https://github.com/Nikolay-x/Terraform-Actions-Azure.git
Cloning into 'Terraform-Actions-Azure'...
warning: You appear to have cloned an empty repository.
PS C:\Users\NB\Exercise IaaC and Monitoring> cd .\Terraform-Actions-Azure\
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> dir


    Directory: C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a----         10-Jun-23     15:17           2981 main.tf
-a----         10-Jun-23     15:29            179 outputs.tf
-a----         10-Jun-23     15:28            464 terraform.tfvars
-a----         10-Jun-23     15:05           1088 variables.tf


PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git add .
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git commit -m "Initial commit"
[main (root-commit) dce88f9] Initial commit
 4 files changed, 152 insertions(+)
 create mode 100644 main.tf
 create mode 100644 outputs.tf
 create mode 100644 terraform.tfvars
 create mode 100644 variables.tf
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git push
warning: git-credential-manager-core was renamed to git-credential-manager
warning: see https://aka.ms/gcm/rename for more information
Enumerating objects: 6, done.
Counting objects: 100% (6/6), done.
Delta compression using up to 8 threads
Compressing objects: 100% (6/6), done.
Writing objects: 100% (6/6), 1.79 KiB | 1.79 MiB/s, done.
Total 6 (delta 0), reused 0 (delta 0), pack-reused 0
To https://github.com/Nikolay-x/Terraform-Actions-Azure.git
 * [new branch]      main -> main
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git add .
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git commit -m "Initial commit1"
[main 30adea4] Initial commit1
 1 file changed, 7 deletions(-)
 delete mode 100644 outputs.tf
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git push
warning: git-credential-manager-core was renamed to git-credential-manager
warning: see https://aka.ms/gcm/rename for more information
Enumerating objects: 3, done.
Counting objects: 100% (3/3), done.
Delta compression using up to 8 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 222 bytes | 222.00 KiB/s, done.
Total 2 (delta 1), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
To https://github.com/Nikolay-x/Terraform-Actions-Azure.git
   dce88f9..30adea4  main -> main
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> terraform version
Terraform v1.4.6
on windows_386
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d999a5a881a --sdk-aut
Option '--sdk-auth' has been deprecated and will be removed in a future release.
Found an existing application instance: (id) a7cf0a73-e2da-4058-a613-37dfd55e85e4. We will patch it.
Insufficient privileges to complete the operation.
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> az login
A web browser has been opened at https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize. Please continue the login in the web browser. If no web browser is available or if the web browser fails to open, use device code flow with `az login --use-device-code`.
[
  {
    "cloudName": "AzureCloud",
    "homeTenantId": "4a06d40c-e447-42be-baef-dd0421ed10bd",
    "id": "56f5a8d7-2b04-4e50-80ad-0d999a5a881a",
    "isDefault": true,
    "managedByTenants": [],
    "name": "Azure for Students",
    "state": "Enabled",
    "tenantId": "4a06d40c-e447-42be-baef-dd0421ed10bd",
    "user": {
      "name": "Nikolay_x@students.softuni.bg",
      "type": "user"
    }
  }
]
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d999a5a881a --sdk-auth
Option '--sdk-auth' has been deprecated and will be removed in a future release.
Found an existing application instance: (id) a7cf0a73-e2da-4058-a613-37dfd55e85e4. We will patch it.
Insufficient privileges to complete the operation.
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d999a5a881a --sdk-auth
Option '--sdk-auth' has been deprecated and will be removed in a future release.
Found an existing application instance: (id) a7cf0a73-e2da-4058-a613-37dfd55e85e4. We will patch it.
Insufficient privileges to complete the operation.
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d999a5a881a --sdk-auth^C
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure>
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure>
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure>
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure>
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure>
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d999a5a881a --sdk-auth
Option '--sdk-auth' has been deprecated and will be removed in a future release.
Found an existing application instance: (id) a7cf0a73-e2da-4058-a613-37dfd55e85e4. We will patch it.
Insufficient privileges to complete the operation.
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions-NB" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d999a5a881a --sdk-auth
Option '--sdk-auth' has been deprecated and will be removed in a future release.
Creating 'contributor' role assignment under scope '/subscriptions/56f5a8d7-2b04-4e50-80ad-0d999a5a881a'
The output includes credentials that you must protect. Be sure that you do not include these credentials in your code or check the credentials into your source control. For more information, see https://aka.ms/azadsp-cli
{
  "clientId": "9bd6a0fd-e269-4476-8fbd-db0ff15e2a75",
  "clientSecret": "nzh8Q~MmcKg0esU8kkX4LiznrBUPXOC1HUZ8Kary",
  "subscriptionId": "56f5a8d7-2b04-4e50-80ad-0d999a5a881a",
  "tenantId": "4a06d40c-e447-42be-baef-dd0421ed10bd",
  "activeDirectoryEndpointUrl": "https://login.microsoftonline.com",
  "resourceManagerEndpointUrl": "https://management.azure.com/",
  "activeDirectoryGraphResourceId": "https://graph.windows.net/",
  "sqlManagementEndpointUrl": "https://management.core.windows.net:8443/",
  "galleryEndpointUrl": "https://gallery.azure.com/",
  "managementEndpointUrl": "https://management.core.windows.net/"
}
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> az storage account create --name taskboardstoragenb --resource-group StorageRG --location westeurope --sku Standard_LRS --kind StorageV2
The public access to all blobs or containers in the storage account will be disallowed by default in the future, which means default value for --allow-blob-public-access is still null but will be equivalent to false.
{
  "accessTier": "Hot",
  "allowBlobPublicAccess": true,
  "allowCrossTenantReplication": null,
  "allowSharedKeyAccess": null,
  "allowedCopyScope": null,
  "azureFilesIdentityBasedAuthentication": null,
  "blobRestoreStatus": null,
  "creationTime": "2023-06-10T14:34:19.138883+00:00",
  "customDomain": null,
  "defaultToOAuthAuthentication": null,
  "dnsEndpointType": null,
  "enableHttpsTrafficOnly": true,
  "enableNfsV3": null,
  "encryption": {
    "encryptionIdentity": null,
    "keySource": "Microsoft.Storage",
    "keyVaultProperties": null,
    "requireInfrastructureEncryption": null,
    "services": {
      "blob": {
        "enabled": true,
        "keyType": "Account",
        "lastEnabledTime": "2023-06-10T14:34:19.498260+00:00"
      },
      "file": {
        "enabled": true,
        "keyType": "Account",
        "lastEnabledTime": "2023-06-10T14:34:19.498260+00:00"
      },
      "queue": null,
      "table": null
    }
  },
  "extendedLocation": null,
  "failoverInProgress": null,
  "geoReplicationStats": null,
  "id": "/subscriptions/56f5a8d7-2b04-4e50-80ad-0d999a5a881a/resourceGroups/StorageRG/providers/Microsoft.Storage/storageAccounts/taskboardstoragenb",
  "identity": null,
  "immutableStorageWithVersioning": null,
  "isHnsEnabled": null,
  "isLocalUserEnabled": null,
  "isSftpEnabled": null,
  "keyCreationTime": {
    "key1": "2023-06-10T14:34:19.263883+00:00",
    "key2": "2023-06-10T14:34:19.263883+00:00"
  },
  "keyPolicy": null,
  "kind": "StorageV2",
  "largeFileSharesState": null,
  "lastGeoFailoverTime": null,
  "location": "westeurope",
  "minimumTlsVersion": "TLS1_0",
  "name": "taskboardstoragenb",
  "networkRuleSet": {
    "bypass": "AzureServices",
    "defaultAction": "Allow",
    "ipRules": [],
    "resourceAccessRules": null,
    "virtualNetworkRules": []
  },
  "primaryEndpoints": {
    "blob": "https://taskboardstoragenb.blob.core.windows.net/",
    "dfs": "https://taskboardstoragenb.dfs.core.windows.net/",
    "file": "https://taskboardstoragenb.file.core.windows.net/",
    "internetEndpoints": null,
    "microsoftEndpoints": null,
    "queue": "https://taskboardstoragenb.queue.core.windows.net/",
    "table": "https://taskboardstoragenb.table.core.windows.net/",
    "web": "https://taskboardstoragenb.z6.web.core.windows.net/"
  },
  "primaryLocation": "westeurope",
  "privateEndpointConnections": [],
  "provisioningState": "Succeeded",
  "publicNetworkAccess": null,
  "resourceGroup": "StorageRG",
  "routingPreference": null,
  "sasPolicy": null,
  "secondaryEndpoints": null,
  "secondaryLocation": null,
  "sku": {
    "name": "Standard_LRS",
    "tier": "Standard"
  },
  "statusOfPrimary": "available",
  "statusOfSecondary": null,
  "storageAccountSkuConversionStatus": null,
  "tags": {},
  "type": "Microsoft.Storage/storageAccounts"
}
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> az storage container create -n taskboardcontainernb --account-name taskboardstoragenb

There are no credentials provided in your command and environment, we will query for account key for your storage account.
It is recommended to provide --connection-string, --account-key or --sas-token in your command as credentials.

You also can add `--auth-mode login` in your command to use Azure Active Directory (Azure AD) for authorization if your login account is assigned required RBAC roles.
For more information about RBAC roles in storage, visit https://docs.microsoft.com/azure/storage/common/storage-auth-aad-rbac-cli.

In addition, setting the corresponding environment variables can avoid inputting credentials in your command. Please use --help to get more information about environment variable usage.
{
  "created": true
}
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git pull
remote: Enumerating objects: 11, done.
remote: Counting objects: 100% (11/11), done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 10 (delta 3), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (10/10), 2.87 KiB | 112.00 KiB/s, done.
From https://github.com/Nikolay-x/Terraform-Actions-Azure
   30adea4..c1a72c7  main       -> origin/main
Updating 30adea4..c1a72c7
Fast-forward
 .github/workflows/terraform.yml | 94 +++++++++++++++++++++++++++++++++++++++++
 1 file changed, 94 insertions(+)
 create mode 100644 .github/workflows/terraform.yml
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git add .
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git commit -m "Adding persistent storage"
[main 4543709] Adding persistent storage
 1 file changed, 8 insertions(+)
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git push
warning: git-credential-manager-core was renamed to git-credential-manager
warning: see https://aka.ms/gcm/rename for more information
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 8 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 428 bytes | 428.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/Nikolay-x/Terraform-Actions-Azure.git
   c1a72c7..4543709  main -> main
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> git pull
Already up to date.
PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure> Get-History

  Id CommandLine
  -- -----------
   1 cd '.\Exercise IaaC and Monitoring\'
   2 git clone https://github.com/Nikolay-x/Terraform-Actions-Azure.git
   3 cd .\Terraform-Actions-Azure\
   4 dir
   5 git add .
   6 git commit -m "Initial commit"
   7 git push
   8 git add .
   9 git commit -m "Initial commit1"
  10 git push
  11 terraform version
  12 az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d99...
  13 az login
  14 az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d99...
  15 az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d99...
  16 az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0d99...
  17 az ad sp create-for-rbac --name "Azure-Terraform-GitHub-Actions-NB" --role contributor --scopes /subscriptions/56f5a8d7-2b04-4e50-80ad-0...
  18 az storage account create --name taskboardstoragenb --resource-group StorageRG --location westeurope --sku Standard_LRS --kind StorageV2
  19 az storage container create -n taskboardcontainernb --account-name taskboardstoragenb
  20 git pull
  21 git add .
  22 git commit -m "Adding persistent storage"
  23 git push
  24 git pull


PS C:\Users\NB\Exercise IaaC and Monitoring\Terraform-Actions-Azure>